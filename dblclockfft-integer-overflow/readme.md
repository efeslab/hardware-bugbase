This bug is originated from https://github.com/ZipCPU/dblclockfft/issues/5.

According to the discussion, it's a integer overflow problem which occurs inside the convround module.

Need to install python modules `scipy` and `cocotb`.

Run `make` to build and test. The testbench uses random input, so you may run the testbench multiple times.

# Testcase

### Description

The fft output is different than expected... sometimes.

Feeding the core with random data, I have (randomly) two
possible outcomes:

* It works flawlessly, giving the expected output data (with
just some rounding error)

* The output is different than expected, but with the
particularity the sequence is alternated correct and incorrect
samples: `OK-WRONG-OK-WRONG-OK-WRONG-...`.

The expected output for the fft is calculated with the python
lib `scipy`.

I'm attaching the file `testcase.tar.gz` that already includes the
files generated by a test run, including some data files:

* `sim_build/waveform.vcd: waveforms

* `data_in.raw`: input data (raw as a single integer of 32 bits)

* `data_out.raw`: output data (raw as a single integer of 32 bits)

* `data_in.iq`: input data parsed (complex values)

* `data_out.iq`: output data parsed (complex values)

* `expected.iq`: expected output (complex values)


### Steps to reproduce

* make fftgen:
```bash
make
```

* generate verilogs+mems:

```bash
./sw/fftgen -v -d testcase/cores/ -f 128 -1 -k 1 -n 16
```

* add timescale and waveform dump for simulation in `fftmain.v`

```verilog
`timescale 1ns/1ps
//...
`ifdef COCOTB_SIM
    initial begin
        $dumpfile("sim_build/waveform.vcd");
        $dumpvars (0,fftmain);
    end
`endif
```

* copy hex files so Icarus verilog can find them

```bash
cp testcase/cores/*.hex ./testcase/
```

* run testbench

```bash
make -C testcase
```

